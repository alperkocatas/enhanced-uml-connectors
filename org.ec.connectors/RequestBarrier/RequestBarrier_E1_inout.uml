<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="20131001" xmlns:xmi="http://www.omg.org/spec/XMI/20131001" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:EnhancedConnectorProfile="http:///schemas/EnhancedConnectorProfile/_QCr6ECq8Ee24GeFhuH3XFg/20" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML" xsi:schemaLocation="http:///schemas/EnhancedConnectorProfile/_QCr6ECq8Ee24GeFhuH3XFg/20 ../../org.ec.profile/EnhancedConnectorProfile.profile.uml#_QCr6ESq8Ee24GeFhuH3XFg">
  <uml:Model xmi:id="_PReF0JPdEeylaYbT_zyPXg" name="EnhancedConnectorTestPkg">
    <packageImport xmi:type="uml:PackageImport" xmi:id="_PVC-QJPdEeylaYbT_zyPXg">
      <importedPackage xmi:type="uml:Model" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#_0"/>
    </packageImport>
    <packagedElement xmi:type="uml:Class" xmi:id="_RWVgkJPdEeylaYbT_zyPXg" name="ECls">
      <ownedAttribute xmi:type="uml:Property" xmi:id="_Dfl9wJPeEeylaYbT_zyPXg" name="a" type="_TTKZoJPdEeylaYbT_zyPXg"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_kFFpQJPeEeylaYbT_zyPXg" name="d" type="_pbVKoJPdEeylaYbT_zyPXg"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_xwpg4BfhEe2UAvjETmpzzg" name="b" visibility="public" type="_ifENMBfhEe2UAvjETmpzzg"/>
      <ownedAttribute xmi:type="uml:Property" xmi:id="_3opPABfhEe2UAvjETmpzzg" name="c" type="_t4AbYBfhEe2UAvjETmpzzg"/>
      <ownedConnector xmi:type="uml:Connector" xmi:id="_Z16woBfiEe2UAvjETmpzzg" name="Connector2">
        <end xmi:type="uml:ConnectorEnd" xmi:id="_Z2GW0BfiEe2UAvjETmpzzg" partWithPort="_xwpg4BfhEe2UAvjETmpzzg" role="_ifENMRfhEe2UAvjETmpzzg"/>
        <end xmi:type="uml:ConnectorEnd" xmi:id="_Z2G94BfiEe2UAvjETmpzzg" role="_mahPkJPeEeylaYbT_zyPXg"/>
      </ownedConnector>
      <ownedConnector xmi:type="uml:Connector" xmi:id="_a0bnUBfiEe2UAvjETmpzzg" name="Connector3">
        <end xmi:type="uml:ConnectorEnd" xmi:id="_a0dcgBfiEe2UAvjETmpzzg" partWithPort="_3opPABfhEe2UAvjETmpzzg" role="_t4AbYRfhEe2UAvjETmpzzg"/>
        <end xmi:type="uml:ConnectorEnd" xmi:id="_a0dcgRfiEe2UAvjETmpzzg" role="_mahPkJPeEeylaYbT_zyPXg"/>
      </ownedConnector>
      <ownedConnector xmi:type="uml:Connector" xmi:id="_r0Af0EoUEe2hx6X2e2jcAA" name="Connector1" contract="_TNfxwChiEe2Cds-4L53svA">
        <end xmi:type="uml:ConnectorEnd" xmi:id="_r0JpwEoUEe2hx6X2e2jcAA" partWithPort="_Dfl9wJPeEeylaYbT_zyPXg" role="_THFQAJPeEeylaYbT_zyPXg"/>
        <end xmi:type="uml:ConnectorEnd" xmi:id="_r0JpwUoUEe2hx6X2e2jcAA" partWithPort="_kFFpQJPeEeylaYbT_zyPXg" role="_mahPkJPeEeylaYbT_zyPXg"/>
      </ownedConnector>
      <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_TNfxwChiEe2Cds-4L53svA" name="RequestBarrierConnectorBehavior">
        <ownedAttribute xmi:type="uml:Property" xmi:id="_bYYxcABTEe2YN9T4mQKmwQ" name="BarrierOn" visibility="public">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Boolean"/>
          <defaultValue xmi:type="uml:LiteralBoolean" xmi:id="_Hmpu8B00Ee216rVAtvZZ3Q" value="true"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_2zPNkAKDEe2EMb2arhAsgw" name="RequestBuffer" visibility="package" aggregation="composite"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_o2kF4B0zEe216rVAtvZZ3Q" name="DefaultReply" visibility="public">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
          <defaultValue xmi:type="uml:LiteralInteger" xmi:id="_-nbxMB0zEe216rVAtvZZ3Q"/>
        </ownedAttribute>
        <language>Alf</language>
        <body>Integer i = 1;&#xD;
&#xD;
this.BarrierOn = false;&#xD;
&#xD;
while (i &lt;= 3)&#xD;
{&#xD;
    Integer request = this.InPort[i].RequestBuffer;&#xD;
    if (request == null)&#xD;
    {&#xD;
        this.BarrierOn = true;&#xD;
    }&#xD;
    i++;&#xD;
}&#xD;
&#xD;
Integer returnValue = this.DefaultReply;&#xD;
if (this.BarrierOn == false)&#xD;
{&#xD;
    // Merge requests&#xD;
    Integer mergedRequest = 0;&#xD;
    i = 1;&#xD;
    while (i &lt;= 3)&#xD;
    {&#xD;
        request = this.InPort[i].RequestBuffer;&#xD;
        if (request != null)&#xD;
        {&#xD;
            mergedRequest += request;&#xD;
             // Invalidate consumed request&#xD;
            this.InPort[i].RequestBuffer = null;    &#xD;
        }&#xD;
        i++;&#xD;
    }&#xD;
&#xD;
    returnValue = this.OutPort[1].xOp(mergedRequest);&#xD;
    this.BarrierOn = true;&#xD;
}&#xD;
&#xD;
return returnValue;</body>
      </ownedBehavior>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_TTKZoJPdEeylaYbT_zyPXg" name="ACls">
        <ownedAttribute xmi:type="uml:Port" xmi:id="_THFQAJPeEeylaYbT_zyPXg" name="pA" visibility="public" type="_cJJbgJPgEeylaYbT_zyPXg" aggregation="composite"/>
      </nestedClassifier>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_pbVKoJPdEeylaYbT_zyPXg" name="DCls">
        <ownedAttribute xmi:type="uml:Port" xmi:id="_mahPkJPeEeylaYbT_zyPXg" name="pD" type="_f86dgJPfEeylaYbT_zyPXg" aggregation="composite"/>
      </nestedClassifier>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_f86dgJPfEeylaYbT_zyPXg" name="ProviderPortType">
        <interfaceRealization xmi:type="uml:InterfaceRealization" xmi:id="_p55EAJPfEeylaYbT_zyPXg" client="_f86dgJPfEeylaYbT_zyPXg" supplier="_y7DX8JPeEeylaYbT_zyPXg" contract="_y7DX8JPeEeylaYbT_zyPXg"/>
      </nestedClassifier>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_cJJbgJPgEeylaYbT_zyPXg" name="RequesterPortType"/>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_ifENMBfhEe2UAvjETmpzzg" name="BCls">
        <ownedAttribute xmi:type="uml:Port" xmi:id="_ifENMRfhEe2UAvjETmpzzg" name="pB" visibility="public" type="_cJJbgJPgEeylaYbT_zyPXg" aggregation="composite"/>
      </nestedClassifier>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_t4AbYBfhEe2UAvjETmpzzg" name="CCls">
        <ownedAttribute xmi:type="uml:Port" xmi:id="_t4AbYRfhEe2UAvjETmpzzg" name="pC" visibility="public" type="_cJJbgJPgEeylaYbT_zyPXg" aggregation="composite"/>
      </nestedClassifier>
    </packagedElement>
    <packagedElement xmi:type="uml:Interface" xmi:id="_y7DX8JPeEeylaYbT_zyPXg" name="XIfc">
      <ownedOperation xmi:type="uml:Operation" xmi:id="_0ufrgJPeEeylaYbT_zyPXg" name="xOp">
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_8y9RMJPeEeylaYbT_zyPXg" name="arg">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
        </ownedParameter>
        <ownedParameter xmi:type="uml:Parameter" xmi:id="_X36FQJPfEeylaYbT_zyPXg" name="returnVal" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
        </ownedParameter>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Usage" xmi:id="_iEKBYJPgEeylaYbT_zyPXg" client="_cJJbgJPgEeylaYbT_zyPXg" supplier="_y7DX8JPeEeylaYbT_zyPXg"/>
    <packagedElement xmi:type="uml:Dependency" xmi:id="_OiZKcEoVEe2hx6X2e2jcAA" client="_r0Af0EoUEe2hx6X2e2jcAA" supplier="_Z16woBfiEe2UAvjETmpzzg"/>
    <packagedElement xmi:type="uml:Dependency" xmi:id="_QEoZQEoVEe2hx6X2e2jcAA" client="_r0Af0EoUEe2hx6X2e2jcAA" supplier="_a0bnUBfiEe2UAvjETmpzzg"/>
    <profileApplication xmi:type="uml:ProfileApplication" xmi:id="_NVDvUB-9Ee2HYY6mAISfnw">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_mcg24iztEe2uAdst3UBrWQ" source="PapyrusVersion">
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_mcg24yztEe2uAdst3UBrWQ" key="Version" value="0.0.21"/>
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_mcg25CztEe2uAdst3UBrWQ" key="Comment" value="Added stereotype &quot;Enhanced Connector&quot;"/>
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_mcg25SztEe2uAdst3UBrWQ" key="Copyright" value=""/>
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_mcg25iztEe2uAdst3UBrWQ" key="Date" value="2022-09-02"/>
        <details xmi:type="ecore:EStringToStringMapEntry" xmi:id="_mcg25yztEe2uAdst3UBrWQ" key="Author" value=""/>
      </eAnnotations>
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_NVPVgB-9Ee2HYY6mAISfnw" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="../../org.ec.profile/EnhancedConnectorProfile.profile.uml#_QCr6ESq8Ee24GeFhuH3XFg"/>
      </eAnnotations>
      <appliedProfile xmi:type="uml:Profile" href="../../org.ec.profile/EnhancedConnectorProfile.profile.uml#_KFphgABXEe2YN9T4mQKmwQ"/>
    </profileApplication>
  </uml:Model>
  <EnhancedConnectorProfile:RequestBuffer xmi:id="_OvJHsB-9Ee2HYY6mAISfnw" base_Property="_2zPNkAKDEe2EMb2arhAsgw"/>
  <EnhancedConnectorProfile:ConnectorBehavior xmi:id="_WnungChjEe2Cds-4L53svA" base_OpaqueBehavior="_TNfxwChiEe2Cds-4L53svA"/>
  <EnhancedConnectorProfile:EnhancedConnector xmi:id="_BKkNsEoVEe2hx6X2e2jcAA" base_Connector="_r0Af0EoUEe2hx6X2e2jcAA"/>
  <EnhancedConnectorProfile:EnhancedConnector xmi:id="_CITBQEoVEe2hx6X2e2jcAA" base_Connector="_a0bnUBfiEe2UAvjETmpzzg"/>
  <EnhancedConnectorProfile:EnhancedConnector xmi:id="_DtYvwEoVEe2hx6X2e2jcAA" base_Connector="_Z16woBfiEe2UAvjETmpzzg"/>
</xmi:XMI>
