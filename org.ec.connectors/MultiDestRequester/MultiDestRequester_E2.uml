<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="20131001" xmlns:xmi="http://www.omg.org/spec/XMI/20131001" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:EnhancedConnectorProfile="http:///schemas/EnhancedConnectorProfile/_5yqtwB-8Ee2HYY6mAISfnw/17" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML" xsi:schemaLocation="http:///schemas/EnhancedConnectorProfile/_5yqtwB-8Ee2HYY6mAISfnw/17 ../../org.ec.profile/EnhancedConnectorProfile.profile.uml#_5yr74B-8Ee2HYY6mAISfnw">
  <uml:Model xmi:id="_PReF0JPdEeylaYbT_zyPXg" name="EnhancedConnectorTestPkg">
    <packageImport xmi:id="_PVC-QJPdEeylaYbT_zyPXg">
      <importedPackage xmi:type="uml:Model" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#_0"/>
    </packageImport>
    <packagedElement xmi:type="uml:Class" xmi:id="_RWVgkJPdEeylaYbT_zyPXg" name="ECls">
      <ownedAttribute xmi:id="_Dfl9wJPeEeylaYbT_zyPXg" name="a" type="_TTKZoJPdEeylaYbT_zyPXg">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_FCcQkJPeEeylaYbT_zyPXg"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_E__ZgJPeEeylaYbT_zyPXg" value="*"/>
      </ownedAttribute>
      <ownedAttribute xmi:id="_SjHAQJPeEeylaYbT_zyPXg" name="b" type="_nLpnAJPdEeylaYbT_zyPXg"/>
      <ownedAttribute xmi:id="_kFFpQJPeEeylaYbT_zyPXg" name="c" type="_pbVKoJPdEeylaYbT_zyPXg"/>
      <ownedAttribute xmi:id="_lSVLWx--Ee2HYY6mAISfnw" name="ConnectorObj" type="_lSTWIB--Ee2HYY6mAISfnw">
        <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_lSVyYB--Ee2HYY6mAISfnw" value="1"/>
        <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_lSVyYR--Ee2HYY6mAISfnw" value="1"/>
      </ownedAttribute>
      <ownedConnector xmi:id="_lSVyYh--Ee2HYY6mAISfnw" name="Connector1_reqEndCon">
        <end xmi:id="_lSVyYx--Ee2HYY6mAISfnw" partWithPort="_Dfl9wJPeEeylaYbT_zyPXg" role="_THFQAJPeEeylaYbT_zyPXg"/>
        <end xmi:id="_lSVyZB--Ee2HYY6mAISfnw" partWithPort="_lSVLWx--Ee2HYY6mAISfnw" role="_lSUkQB--Ee2HYY6mAISfnw"/>
      </ownedConnector>
      <ownedConnector xmi:id="_lSVyZR--Ee2HYY6mAISfnw" name="Connector1_prvEndCon">
        <end xmi:id="_lSVyZh--Ee2HYY6mAISfnw" partWithPort="_lSVLWx--Ee2HYY6mAISfnw" role="_lSVLUB--Ee2HYY6mAISfnw"/>
        <end xmi:id="_lSVyZx--Ee2HYY6mAISfnw" partWithPort="_SjHAQJPeEeylaYbT_zyPXg" role="_dM9T0JPeEeylaYbT_zyPXg"/>
      </ownedConnector>
      <ownedConnector xmi:id="_lSVyax--Ee2HYY6mAISfnw" name="Connector2_prvEndCon">
        <end xmi:id="_lSVybB--Ee2HYY6mAISfnw" partWithPort="_lSVLWx--Ee2HYY6mAISfnw" role="_lSVLUB--Ee2HYY6mAISfnw"/>
        <end xmi:id="_lSVybR--Ee2HYY6mAISfnw" partWithPort="_kFFpQJPeEeylaYbT_zyPXg" role="_mahPkJPeEeylaYbT_zyPXg"/>
      </ownedConnector>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_TTKZoJPdEeylaYbT_zyPXg" name="ACls">
        <ownedAttribute xmi:type="uml:Port" xmi:id="_THFQAJPeEeylaYbT_zyPXg" name="pA" visibility="public" type="_cJJbgJPgEeylaYbT_zyPXg" aggregation="composite"/>
      </nestedClassifier>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_nLpnAJPdEeylaYbT_zyPXg" name="BCls">
        <ownedAttribute xmi:type="uml:Port" xmi:id="_dM9T0JPeEeylaYbT_zyPXg" name="pB" type="_f86dgJPfEeylaYbT_zyPXg" aggregation="composite"/>
      </nestedClassifier>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_pbVKoJPdEeylaYbT_zyPXg" name="CCls">
        <ownedAttribute xmi:type="uml:Port" xmi:id="_mahPkJPeEeylaYbT_zyPXg" name="pC" type="_f86dgJPfEeylaYbT_zyPXg" aggregation="composite"/>
      </nestedClassifier>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_f86dgJPfEeylaYbT_zyPXg" name="ProviderPortType">
        <interfaceRealization xmi:id="_p55EAJPfEeylaYbT_zyPXg" client="_f86dgJPfEeylaYbT_zyPXg" supplier="_y7DX8JPeEeylaYbT_zyPXg" contract="_y7DX8JPeEeylaYbT_zyPXg"/>
      </nestedClassifier>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_cJJbgJPgEeylaYbT_zyPXg" name="RequesterPortType"/>
      <nestedClassifier xmi:type="uml:Class" xmi:id="_lSTWIB--Ee2HYY6mAISfnw" name="Connector1_ConnectorCls">
        <ownedAttribute xmi:type="uml:Port" xmi:id="_lSUkQB--Ee2HYY6mAISfnw" name="prvPort" type="_f86dgJPfEeylaYbT_zyPXg"/>
        <ownedAttribute xmi:type="uml:Port" xmi:id="_lSVLUB--Ee2HYY6mAISfnw" name="reqPort" type="_cJJbgJPgEeylaYbT_zyPXg">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_lSVLUR--Ee2HYY6mAISfnw" value="2"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_lSVLUh--Ee2HYY6mAISfnw" value="2"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_lSVLVR--Ee2HYY6mAISfnw" name="InPort" type="_lSVLUx--Ee2HYY6mAISfnw" isOrdered="true" isUnique="false">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_lSVLVh--Ee2HYY6mAISfnw" value="1"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_lSVLVx--Ee2HYY6mAISfnw" value="1"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_lSVybh--Ee2HYY6mAISfnw" name="OutPort" type="_y7DX8JPeEeylaYbT_zyPXg" isOrdered="true" isUnique="false">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_lSVybx--Ee2HYY6mAISfnw" value="2"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_lSVycB--Ee2HYY6mAISfnw" value="2"/>
        </ownedAttribute>
        <ownedAttribute xmi:id="_2zPNkAKDEe2EMb2arhAsgw" name="ReplyBuffer" visibility="package" isOrdered="true" isUnique="false" aggregation="composite">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_jYi_MB--Ee2HYY6mAISfnw" value="2"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_jajxYB--Ee2HYY6mAISfnw" value="2"/>
        </ownedAttribute>
        <ownedConnector xmi:id="_lSVLWB--Ee2HYY6mAISfnw" name="InPortConnector">
          <end xmi:id="_lSVLWR--Ee2HYY6mAISfnw" role="_lSUkQB--Ee2HYY6mAISfnw"/>
          <end xmi:id="_lSVLWh--Ee2HYY6mAISfnw" partWithPort="_lSVLVR--Ee2HYY6mAISfnw" role="_lSVLVB--Ee2HYY6mAISfnw"/>
        </ownedConnector>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_lSVycR--Ee2HYY6mAISfnw" name="MultiDestRequesterConnectorBehavior" specification="_lSVyaB--Ee2HYY6mAISfnw">
          <body>Integer i = 1; 
for (ifc in this.OutPort)  
{
    this.ReplyBuffer[i] = ifc.xOp(arg);
    i++; 
}

// Reply merge strategy:         
i = 1;
Integer sum = 0;
while (i&lt;=2)
{
    Integer intval = this.ReplyBuffer[i];
    
    if (intval != null)
    {
        sum = sum + intval;
         
        // Invalidate value in the single copy buffer
        this.ReplyBuffer[i] = null;        
    }
    i++;
}

return sum;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_l_8fQR--Ee2HYY6mAISfnw" name="Connector1_ConnectorClsBehavior" specification="_l_8fQB--Ee2HYY6mAISfnw">
          <language>Alf</language>
          <body>Integer i = 1;
while (i &lt;= 2) 
{
    this.InPort[i] = new RequestPortCls(this);
    i = i + 1;
}
</body>
        </ownedBehavior>
        <ownedOperation xmi:id="_lSVyaB--Ee2HYY6mAISfnw" name="xOp" method="_lSVycR--Ee2HYY6mAISfnw">
          <ownedParameter xmi:id="_lSVyaR--Ee2HYY6mAISfnw" name="arg">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
          </ownedParameter>
          <ownedParameter xmi:id="_lSVyah--Ee2HYY6mAISfnw" name="returnVal" direction="return">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:id="_l_8fQB--Ee2HYY6mAISfnw" name="Connector1_ConnectorCls" method="_l_8fQR--Ee2HYY6mAISfnw"/>
        <nestedClassifier xmi:type="uml:Class" xmi:id="_lSVLUx--Ee2HYY6mAISfnw" name="RequestPortCls">
          <ownedAttribute xmi:type="uml:Port" xmi:id="_lSVLVB--Ee2HYY6mAISfnw" name="prvPort" type="_f86dgJPfEeylaYbT_zyPXg"/>
          <ownedAttribute xmi:id="_l_8fQh--Ee2HYY6mAISfnw" name="ownerConnector" type="_lSTWIB--Ee2HYY6mAISfnw">
            <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_l_9GUB--Ee2HYY6mAISfnw" value="1"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_l_9GUR--Ee2HYY6mAISfnw" value="1"/>
          </ownedAttribute>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_l_9GVB--Ee2HYY6mAISfnw" name="RequestPortClsBehavior" specification="_l_9GUh--Ee2HYY6mAISfnw">
            <ownedParameter xmi:id="_l_9GVR--Ee2HYY6mAISfnw" name="c" type="_lSTWIB--Ee2HYY6mAISfnw"/>
            <language>Alf</language>
            <body>this.ownerConnector  = c;
</body>
          </ownedBehavior>
          <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_l_9GWR--Ee2HYY6mAISfnw" name="xOpBehavior" specification="_l_9GVh--Ee2HYY6mAISfnw">
            <language>Alf</language>
            <body>// Let connector object process the request
return this.ownerConnector.xOp(arg);
</body>
          </ownedBehavior>
          <ownedOperation xmi:id="_l_9GUh--Ee2HYY6mAISfnw" name="RequestPortCls" method="_l_9GVB--Ee2HYY6mAISfnw">
            <ownedParameter xmi:id="_l_9GUx--Ee2HYY6mAISfnw" name="c" type="_lSTWIB--Ee2HYY6mAISfnw"/>
          </ownedOperation>
          <ownedOperation xmi:id="_l_9GVh--Ee2HYY6mAISfnw" name="xOp" method="_l_9GWR--Ee2HYY6mAISfnw">
            <ownedParameter xmi:id="_l_9GVx--Ee2HYY6mAISfnw" name="arg">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
            </ownedParameter>
            <ownedParameter xmi:id="_l_9GWB--Ee2HYY6mAISfnw" name="returnVal" direction="return">
              <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
            </ownedParameter>
          </ownedOperation>
        </nestedClassifier>
      </nestedClassifier>
    </packagedElement>
    <packagedElement xmi:type="uml:Interface" xmi:id="_y7DX8JPeEeylaYbT_zyPXg" name="XIfc">
      <ownedOperation xmi:id="_0ufrgJPeEeylaYbT_zyPXg" name="xOp">
        <ownedParameter xmi:id="_8y9RMJPeEeylaYbT_zyPXg" name="arg">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
        </ownedParameter>
        <ownedParameter xmi:id="_X36FQJPfEeylaYbT_zyPXg" name="returnVal" direction="return">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
        </ownedParameter>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Usage" xmi:id="_iEKBYJPgEeylaYbT_zyPXg" client="_cJJbgJPgEeylaYbT_zyPXg" supplier="_y7DX8JPeEeylaYbT_zyPXg"/>
    <profileApplication xmi:id="_Axx08B-9Ee2HYY6mAISfnw">
      <eAnnotations xmi:id="_Ax3UgB-9Ee2HYY6mAISfnw" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="../../org.ec.profile/EnhancedConnectorProfile.profile.uml#_5yr74B-8Ee2HYY6mAISfnw"/>
      </eAnnotations>
      <appliedProfile href="../../org.ec.profile/EnhancedConnectorProfile.profile.uml#_KFphgABXEe2YN9T4mQKmwQ"/>
    </profileApplication>
  </uml:Model>
  <EnhancedConnectorProfile:ReplyBuffer xmi:id="_cg6ZAB--Ee2HYY6mAISfnw" base_Property="_2zPNkAKDEe2EMb2arhAsgw"/>
</xmi:XMI>
